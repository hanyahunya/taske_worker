<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{email.tfa.title}">Taske 2단계 인증</title>
    <style>
        /* minimal-white-style.css 기반 스타일 */
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #000;
            background: #fff;
            margin: 0;
            padding: 0;
        }
        .email-container {
            width: 100%;
            max-width: 500px; /* .auth-form과 유사한 너비 */
            margin: 40px auto;
            border: 2px solid #000; /* auth-form 테두리 */
            padding: 50px;
            box-sizing: border-box;
        }
        .header {
            text-align: center;
            margin-bottom: 40px;
            border-bottom: 2px solid #000;
            padding-bottom: 30px;
        }
        .header h1 {
            font-size: 36px;
            font-weight: 100;
            letter-spacing: -1px;
            margin: 0;
        }
        .content {
            text-align: center;
        }
        .content p {
            font-size: 16px;
            font-weight: 300;
            margin-bottom: 30px;
        }
        .code-wrapper {
            margin-bottom: 30px;
        }
        /* 인증 코드 박스 (클릭 가능) */
        .verification-code {
            display: inline-block;
            padding: 20px 40px;
            background: #fff;
            color: #000;
            border: 2px solid #000;
            font-size: 32px;
            font-weight: 300;
            letter-spacing: 5px;
            cursor: text; /* 커서를 텍스트로 변경 */
            transition: all 0.3s ease;
            user-select: auto; /* 텍스트 선택 가능하도록 변경 */
        }
        /* 요청에 따라 hover 효과 제거
        .verification-code:hover {
            background: #000;
            color: #fff;
        }
        */
        .info-text {
            font-size: 13px;
            color: #666;
        }
        .footer {
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #000;
            text-align: center;
            font-size: 12px;
            letter-spacing: 1px;
            font-weight: 500;
            text-transform: uppercase;
        }
    </style>
</head>
<body>

<div class="email-container">

    <div class="header">
        <h1 th:text="#{email.tfa.greeting}">인증 코드</h1>
    </div>

    <div class="content">
        <p th:text="#{email.tfa.message1}">
            Taske 계정 2단계 인증 코드입니다.
        </p>

        <!-- 클릭 시 복사되는 영역 -->
        <div class="code-wrapper">
            <div id="codeBox"
                 class="verification-code"
                 th:text="${verification_code}">
                123456
            </div>
        </div>

        <p class="info-text" th:text="#{email.tfa.message2}">
            이 코드를 인증 페이지에 입력하세요.
        </p>
        <p class="info-text" th:text="#{email.tfa.expiration}">
            이 코드는 3분간 유효합니다.
        </p>
    </div>

    <div class="footer">
        <p th:text="#{email.tfa.footer}">
            © 2025 Taske. All rights reserved.
        </p>
    </div>

</div>

<!-- 스크립트: 코드 복사 기능 (클립보드 API 사용) -->
<script>
    function copyCode(element, copiedText) {
        // navigator.clipboard가 http 환경에서는 undefined일 수 있으므로
        // https 환경에서만 작동하는 것을 권장합니다.
        if (navigator.clipboard) {
            const code = element.innerText;
            navigator.clipboard.writeText(code).then(function() {
                const originalText = code;
                element.innerText = 'Copied!';
                setTimeout(function() {
                    element.innerText = originalText;
                }, 1500);
            }, function(err) {
                console.error('Could not copy text: ', err);
            });
        } else {
            // http 환경 등 클립보드 API를 쓸 수 없는 경우의 폴백
            alert('클립보드 복사 기능은 https 환경에서만 지원됩니다.');
        }
    }
</script>

</body>
</html>

